(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{3353:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>d});var a=r(4568);r(7620);var s=r(3928);function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...r})}function c(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}},3928:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2987),s=r(607);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},4148:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var a=r(4568);r(7620);var s=r(9649),n=r(615),i=r(3928);let l=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,asChild:n=!1,...o}=e,c=n?s.DX:"span";return(0,a.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(l({variant:r}),t),...o})}},6962:(e,t,r)=>{Promise.resolve().then(r.bind(r,8567))},7567:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var a=r(1326);let s="typeamp_token",n=(0,a.v)(e=>({user:null,token:null,login:(t,r)=>{localStorage.setItem(s,r),e({user:t,token:r})},logout:()=>{localStorage.removeItem(s),e({user:null,token:null})},initializeAuth:()=>{let t=localStorage.getItem(s);t&&e({token:t})}}))},7649:(e,t,r)=>{"use strict";r.d(t,{$u:()=>c,Hz:()=>o,XA:()=>d,XP:()=>s,_J:()=>i,od:()=>l,pO:()=>n});let a="typeamp-data";function s(){try{let e=localStorage.getItem(a);if(!e)return[];let t=JSON.parse(e);if(!t.testHistory||!Array.isArray(t.testHistory))return[];return t.testHistory}catch(e){return console.error("Error retrieving test history:",e),[]}}function n(e){try{let t=s(),r={testHistory:[e,...t].slice(0,100),lastUpdated:Date.now()};localStorage.setItem(a,JSON.stringify(r))}catch(e){console.error("Error saving test result:",e)}}function i(){try{localStorage.removeItem(a)}catch(e){console.error("Error clearing test history:",e)}}function l(e){return 0===e.length?0:Math.round(e.reduce((e,t)=>e+t.wpm,0)/e.length)}function o(e){return 0===e.length?0:Math.max(...e.map(e=>e.wpm))}function c(e){return 0===e.length?0:Math.round(e.reduce((e,t)=>e+t.accuracy,0)/e.length)}function d(e){return e.length}},8567:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U});var a=r(4568),s=r(7620),n=r(7359),i=r(7649),l=r(9879),o=r(7567),c=r(3928);function d(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",t),...r})})}function u(e){let{className:t,...r}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",t),...r})}function m(e){let{className:t,...r}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",t),...r})}function x(e){let{className:t,...r}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...r})}function h(e){let{className:t,...r}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function p(e){let{className:t,...r}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function f(e){let{className:t,...r}=e;return(0,a.jsx)("caption",{"data-slot":"table-caption",className:(0,c.cn)("text-muted-foreground mt-4 text-sm",t),...r})}var g=r(4148),j=r(3353),v=r(149),y=r(8123),b=r(4503),w=r(7296),N=r(6488),k=r(3861),S=r(9608),A=r(8011),C=r(4711),z=r(4931),P=r(6430);function _(e){let{...t}=e;return(0,a.jsx)(A.bL,{"data-slot":"select",...t})}function W(e){let{...t}=e;return(0,a.jsx)(A.WT,{"data-slot":"select-value",...t})}function E(e){let{className:t,size:r="default",children:s,...n}=e;return(0,a.jsxs)(A.l9,{"data-slot":"select-trigger","data-size":r,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[s,(0,a.jsx)(A.In,{asChild:!0,children:(0,a.jsx)(C.A,{className:"size-4 opacity-50"})})]})}function D(e){let{className:t,children:r,position:s="popper",...n}=e;return(0,a.jsx)(A.ZL,{children:(0,a.jsxs)(A.UC,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...n,children:[(0,a.jsx)(O,{}),(0,a.jsx)(A.LM,{className:(0,c.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),(0,a.jsx)(T,{})]})})}function M(e){let{className:t,children:r,...s}=e;return(0,a.jsxs)(A.q7,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...s,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(A.VF,{children:(0,a.jsx)(z.A,{className:"size-4"})})}),(0,a.jsx)(A.p4,{children:r})]})}function O(e){let{className:t,...r}=e;return(0,a.jsx)(A.PP,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(P.A,{className:"size-4"})})}function T(e){let{className:t,...r}=e;return(0,a.jsx)(A.wn,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(C.A,{className:"size-4"})})}function L(e){let{testHistory:t}=e,[r,n]=(0,s.useState)("wpm"),i=t.slice().reverse().map(e=>({date:new Date(e.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"}),wpm:e.wpm,accuracy:e.accuracy,timestamp:e.timestamp})),l=(e=>{switch(e){case"wpm":return{label:"Words per Minute",color:"hsl(var(--primary))",format:e=>"".concat(e," WPM")};case"accuracy":return{label:"Accuracy (%)",color:"hsl(var(--success, var(--green-600)))",format:e=>"".concat(e,"%")}}})(r);return 0===t.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-4 flex justify-end",children:(0,a.jsxs)(_,{value:r,onValueChange:e=>n(e),children:[(0,a.jsx)(E,{className:"w-[150px]",children:(0,a.jsx)(W,{})}),(0,a.jsxs)(D,{children:[(0,a.jsx)(M,{value:"wpm",children:"WPM"}),(0,a.jsx)(M,{value:"accuracy",children:"Accuracy"})]})]})}),(0,a.jsx)("div",{className:"text-muted-foreground flex h-[300px] items-center justify-center",children:(0,a.jsx)("p",{children:"No test history to display"})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-4 flex justify-end",children:(0,a.jsxs)(_,{value:r,onValueChange:e=>n(e),children:[(0,a.jsx)(E,{className:"w-[150px]",children:(0,a.jsx)(W,{})}),(0,a.jsxs)(D,{children:[(0,a.jsx)(M,{value:"wpm",children:"WPM"}),(0,a.jsx)(M,{value:"accuracy",children:"Accuracy"})]})]})}),(0,a.jsx)("div",{className:"h-[300px] w-full",children:(0,a.jsx)(v.u,{width:"100%",height:"100%",children:(0,a.jsxs)(y.b,{data:i,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(b.d,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,a.jsx)(w.W,{dataKey:"date",className:"text-xs",tick:{fill:"currentColor"},tickLine:{stroke:"currentColor"}}),(0,a.jsx)(N.h,{className:"text-xs",tick:{fill:"currentColor"},tickLine:{stroke:"currentColor"},label:{value:l.label,angle:-90,position:"insideLeft",className:"fill-muted-foreground"}}),(0,a.jsx)(k.m,{content:(0,a.jsx)(e=>{let{active:t,payload:s,label:n}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,a.jsxs)("div",{className:"bg-background rounded-lg border p-3 shadow-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:n}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:new Date(e.timestamp).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}),(0,a.jsx)("div",{className:"mt-2 space-y-1",children:"wpm"===r?(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-primary font-medium",children:"WPM:"})," ",e.wpm]}):(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-green-600",children:"Accuracy:"})," ",e.accuracy,"%"]})})]})}return null},{})}),(0,a.jsx)(S.N,{type:"monotone",dataKey:r,stroke:l.color,strokeWidth:2,dot:{r:4,fill:l.color},activeDot:{r:6}})]})})})]})}function H(e){let{label:t,value:r,unit:s}=e;return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-1 text-sm",children:t}),(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[r,s&&(0,a.jsx)("span",{className:"text-muted-foreground ml-1 text-xl",children:s})]})]})}function I(e){let{testHistory:t}=e,r=(0,i.od)(t),s=(0,i.Hz)(t),n=(0,i.$u)(t),l=(0,i.XA)(t);return(0,a.jsx)(j.Zp,{children:(0,a.jsx)(j.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6 md:grid-cols-4",children:[(0,a.jsx)(H,{label:"Average WPM",value:r,unit:"wpm"}),(0,a.jsx)(H,{label:"Highest WPM",value:s,unit:"wpm"}),(0,a.jsx)(H,{label:"Average Accuracy",value:n,unit:"%"}),(0,a.jsx)(H,{label:"Total Tests",value:l})]})})})}function U(){let{token:e}=(0,o.n)(),[t,r]=(0,s.useState)([]),[c,v]=(0,s.useState)(!0),{data:y,error:b,isLoading:w}=(0,n.Ay)(e?"/api/me/tests":null,t=>(0,l.GO)(t,e));(0,s.useEffect)(()=>{if(e)v(!1);else try{let e=(0,i.XP)();r(e)}catch(e){console.error("Error loading test history:",e)}finally{v(!1)}},[e]);let N=e&&y?y.map(e=>({id:e.id,timestamp:new Date(e.timestamp).getTime(),mode:e.config.mode||"time",duration:e.config.duration,wordCount:e.config.wordCount,textSource:e.config.textSource||"top-1k",difficulty:e.config.difficulty||"Normal",punctuation:e.config.punctuation||!1,wpm:e.wpm,accuracy:e.accuracy,totalChars:0,correctChars:0,incorrectChars:0})):t,k=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},S=e=>e.charAt(0).toUpperCase()+e.slice(1),A=e=>"time"===e.mode&&e.duration?"".concat(e.duration,"s"):"words"===e.mode&&e.wordCount?"".concat(e.wordCount," words"):"-";return(e?w:c)?(0,a.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"mb-8 h-8 w-1/4 rounded bg-gray-200"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-12 rounded bg-gray-200"}),(0,a.jsx)("div",{className:"h-12 rounded bg-gray-200"}),(0,a.jsx)("div",{className:"h-12 rounded bg-gray-200"})]})]})}):b?(0,a.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,a.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:(0,a.jsx)("p",{className:"text-red-800",children:"Error loading test history. Please try again later."})})}):(0,a.jsxs)("div",{className:"container mx-auto max-w-7xl px-6 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:"Profile"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"View your typing test history and track your progress over time."})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(I,{testHistory:N})}),(0,a.jsxs)(j.Zp,{className:"mb-8",children:[(0,a.jsxs)(j.aR,{children:[(0,a.jsx)(j.ZB,{children:"Performance Over Time"}),(0,a.jsx)(j.BT,{children:"Track your typing speed progress across all your tests"})]}),(0,a.jsx)(j.Wu,{children:(0,a.jsx)(L,{testHistory:N})})]}),(0,a.jsx)("div",{className:"rounded-lg border",children:(0,a.jsxs)(d,{children:[(0,a.jsx)(f,{children:0===N.length?"No test history yet. Complete a typing test to see your results here.":"Showing ".concat(N.length," test").concat(1===N.length?"":"s")}),(0,a.jsx)(u,{children:(0,a.jsxs)(x,{children:[(0,a.jsx)(h,{children:"Date"}),(0,a.jsx)(h,{children:"Mode"}),(0,a.jsx)(h,{children:"Details"}),(0,a.jsx)(h,{children:"WPM"}),(0,a.jsx)(h,{children:"Accuracy"}),(0,a.jsx)(h,{children:"Difficulty"}),(0,a.jsx)(h,{children:"Word List"}),(0,a.jsx)(h,{children:"Modifiers"})]})}),(0,a.jsx)(m,{children:0===N.length?(0,a.jsx)(x,{children:(0,a.jsx)(p,{colSpan:8,className:"text-muted-foreground text-center",children:"No tests completed yet"})}):N.map(e=>(0,a.jsxs)(x,{children:[(0,a.jsx)(p,{className:"font-medium",children:k(e.timestamp)}),(0,a.jsx)(p,{children:(0,a.jsx)(g.E,{variant:"secondary",children:S(e.mode)})}),(0,a.jsx)(p,{children:A(e)}),(0,a.jsx)(p,{className:"font-semibold",children:e.wpm}),(0,a.jsx)(p,{children:(0,a.jsxs)("span",{className:e.accuracy>=95?"text-green-600":"",children:[e.accuracy,"%"]})}),(0,a.jsx)(p,{children:(0,a.jsx)(g.E,{variant:"Master"===e.difficulty?"destructive":"Expert"===e.difficulty?"default":"secondary",children:e.difficulty})}),(0,a.jsx)(p,{className:"text-sm",children:e.textSource.replace("-"," ").replace("1k","1K")}),(0,a.jsx)(p,{children:e.punctuation&&(0,a.jsx)(g.E,{variant:"outline",className:"text-xs",children:"Punctuation"})})]},e.id))})]})})]})}},9879:(e,t,r)=>{"use strict";r.d(t,{DY:()=>i,GO:()=>c,Lx:()=>l,zW:()=>o});var a=r(7649);let s="http://localhost:3001";class n{async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(s).concat(e),a={headers:{"Content-Type":"application/json",...t.headers},...t},n=await fetch(r,a),i=await n.json();if(!n.ok)throw Error(i.error||"An error occurred");return i}async registerUser(e){return this.makeRequest("/api/auth/register",{method:"POST",body:JSON.stringify(e)})}async loginUser(e){return this.makeRequest("/api/auth/login",{method:"POST",body:JSON.stringify(e)})}async syncLocalHistory(e){let t=(0,a.XP)();if(0===t.length)return null;let r=t.map(e=>({wpm:e.wpm,accuracy:e.accuracy,rawWpm:e.wpm,consistency:null,config:{mode:e.mode,duration:e.duration,wordCount:e.wordCount,textSource:e.textSource,difficulty:e.difficulty,punctuation:e.punctuation},tags:[],timestamp:new Date(e.timestamp).toISOString()})),s=await this.makeRequest("/api/me/tests/bulk",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify({testResults:r})});return(0,a._J)(),s}}let{registerUser:i,loginUser:l,syncLocalHistory:o}=new n;async function c(e,t){let r=await fetch("".concat(s).concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!r.ok){let e=await r.json(),t=Error("An error occurred while fetching the data.");throw t.info=e,t.status=r.status,t}return r.json()}}},e=>{var t=t=>e(e.s=t);e.O(0,[290,577,647,587,315,358],()=>t(6962)),_N_E=e.O()}]);