(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{3353:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>l,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>d});var a=r(4568);r(7620);var s=r(3928);function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...r})}function c(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}},3928:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2987),s=r(607);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},4148:(e,t,r)=>{"use strict";r.d(t,{E:()=>c});var a=r(4568);r(7620);var s=r(9649),n=r(615),i=r(3928);let o=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:r,asChild:n=!1,...c}=e,l=n?s.DX:"span";return(0,a.jsx)(l,{"data-slot":"badge",className:(0,i.cn)(o({variant:r}),t),...c})}},6218:(e,t,r)=>{"use strict";r.d(t,{K:()=>a});let a=(0,r(1326).v)(e=>({isAuthModalOpen:!1,openAuthModal:()=>e({isAuthModalOpen:!0}),closeAuthModal:()=>e({isAuthModalOpen:!1})}))},6310:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var a=r(4568),s=r(7620),n=r(7359),i=r(7649),o=r(9879),c=r(7567),l=r(3928);function d(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,l.cn)("w-full caption-bottom text-sm",t),...r})})}function u(e){let{className:t,...r}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,l.cn)("[&_tr]:border-b",t),...r})}function m(e){let{className:t,...r}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,l.cn)("[&_tr:last-child]:border-0",t),...r})}function h(e){let{className:t,...r}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,l.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...r})}function x(e){let{className:t,...r}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,l.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function g(e){let{className:t,...r}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,l.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function p(e){let{className:t,...r}=e;return(0,a.jsx)("caption",{"data-slot":"table-caption",className:(0,l.cn)("text-muted-foreground mt-4 text-sm",t),...r})}var f=r(4148),v=r(3353),y=r(149),b=r(8123),j=r(4503),w=r(7296),N=r(6488),k=r(3861),S=r(9608),A=r(8011),z=r(4711),P=r(4931),E=r(6430);function C(e){let{...t}=e;return(0,a.jsx)(A.bL,{"data-slot":"select",...t})}function _(e){let{...t}=e;return(0,a.jsx)(A.WT,{"data-slot":"select-value",...t})}function O(e){let{className:t,size:r="default",children:s,...n}=e;return(0,a.jsxs)(A.l9,{"data-slot":"select-trigger","data-size":r,className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[s,(0,a.jsx)(A.In,{asChild:!0,children:(0,a.jsx)(z.A,{className:"size-4 opacity-50"})})]})}function M(e){let{className:t,children:r,position:s="popper",...n}=e;return(0,a.jsx)(A.ZL,{children:(0,a.jsxs)(A.UC,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...n,children:[(0,a.jsx)(D,{}),(0,a.jsx)(A.LM,{className:(0,l.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),(0,a.jsx)(T,{})]})})}function W(e){let{className:t,children:r,...s}=e;return(0,a.jsxs)(A.q7,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...s,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(A.VF,{children:(0,a.jsx)(P.A,{className:"size-4"})})}),(0,a.jsx)(A.p4,{children:r})]})}function D(e){let{className:t,...r}=e;return(0,a.jsx)(A.PP,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(E.A,{className:"size-4"})})}function T(e){let{className:t,...r}=e;return(0,a.jsx)(A.wn,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(z.A,{className:"size-4"})})}function L(e){let{testHistory:t}=e,[r,n]=(0,s.useState)("wpm"),i=t.slice().reverse().map(e=>({date:new Date(e.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"}),wpm:e.wpm,accuracy:e.accuracy,timestamp:e.timestamp})),o=(e=>{switch(e){case"wpm":return{label:"Words per Minute",color:"hsl(var(--primary))",format:e=>"".concat(e," WPM")};case"accuracy":return{label:"Accuracy (%)",color:"hsl(var(--success, var(--green-600)))",format:e=>"".concat(e,"%")}}})(r);return 0===t.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-4 flex justify-end",children:(0,a.jsxs)(C,{value:r,onValueChange:e=>n(e),children:[(0,a.jsx)(O,{className:"w-[150px]",children:(0,a.jsx)(_,{})}),(0,a.jsxs)(M,{children:[(0,a.jsx)(W,{value:"wpm",children:"WPM"}),(0,a.jsx)(W,{value:"accuracy",children:"Accuracy"})]})]})}),(0,a.jsx)("div",{className:"text-muted-foreground flex h-[300px] items-center justify-center",children:(0,a.jsx)("p",{children:"No test history to display"})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-4 flex justify-end",children:(0,a.jsxs)(C,{value:r,onValueChange:e=>n(e),children:[(0,a.jsx)(O,{className:"w-[150px]",children:(0,a.jsx)(_,{})}),(0,a.jsxs)(M,{children:[(0,a.jsx)(W,{value:"wpm",children:"WPM"}),(0,a.jsx)(W,{value:"accuracy",children:"Accuracy"})]})]})}),(0,a.jsx)("div",{className:"h-[300px] w-full",children:(0,a.jsx)(y.u,{width:"100%",height:"100%",children:(0,a.jsxs)(b.b,{data:i,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(j.d,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,a.jsx)(w.W,{dataKey:"date",className:"text-xs",tick:{fill:"currentColor"},tickLine:{stroke:"currentColor"}}),(0,a.jsx)(N.h,{className:"text-xs",tick:{fill:"currentColor"},tickLine:{stroke:"currentColor"},label:{value:o.label,angle:-90,position:"insideLeft",className:"fill-muted-foreground"}}),(0,a.jsx)(k.m,{content:(0,a.jsx)(e=>{let{active:t,payload:s,label:n}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,a.jsxs)("div",{className:"bg-background rounded-lg border p-3 shadow-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:n}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:new Date(e.timestamp).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}),(0,a.jsx)("div",{className:"mt-2 space-y-1",children:"wpm"===r?(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-primary font-medium",children:"WPM:"})," ",e.wpm]}):(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-green-600",children:"Accuracy:"})," ",e.accuracy,"%"]})})]})}return null},{})}),(0,a.jsx)(S.N,{type:"monotone",dataKey:r,stroke:o.color,strokeWidth:2,dot:{r:4,fill:o.color},activeDot:{r:6}})]})})})]})}function R(e){let{label:t,value:r,unit:s}=e;return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-1 text-sm",children:t}),(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[r,s&&(0,a.jsx)("span",{className:"text-muted-foreground ml-1 text-xl",children:s})]})]})}function q(e){let{testHistory:t}=e,r=(0,i.od)(t),s=(0,i.Hz)(t),n=(0,i.$u)(t),o=(0,i.XA)(t);return(0,a.jsx)(v.Zp,{children:(0,a.jsx)(v.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6 md:grid-cols-4",children:[(0,a.jsx)(R,{label:"Average WPM",value:r,unit:"wpm"}),(0,a.jsx)(R,{label:"Highest WPM",value:s,unit:"wpm"}),(0,a.jsx)(R,{label:"Average Accuracy",value:n,unit:"%"}),(0,a.jsx)(R,{label:"Total Tests",value:o})]})})})}let I=(0,r(615).F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function H(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,l.cn)(I({variant:r}),t),...s})}function B(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert-title",className:(0,l.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...r})}function J(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...r})}var U=r(7227),V=r(6218),X=r(6141);function F(){let{openAuthModal:e}=(0,V.K)();return(0,a.jsxs)(H,{className:"mb-6",children:[(0,a.jsx)(X.A,{className:"h-4 w-4"}),(0,a.jsx)(B,{children:"Sync Your Progress"}),(0,a.jsxs)(J,{children:[(0,a.jsx)(U.$,{variant:"link",className:"h-auto p-0 text-sm font-normal",onClick:()=>{e()},children:"Create a free account"})," ","to sync your history across devices."]})]})}function Z(){let{token:e}=(0,c.n)(),[t,r]=(0,s.useState)([]),[l,y]=(0,s.useState)(!0),{data:b,error:j,isLoading:w}=(0,n.Ay)(e?"/api/me/tests":null,t=>(0,o.GO)(t,e));(0,s.useEffect)(()=>{if(e)y(!1);else try{let e=(0,i.XP)();r(e)}catch(e){console.error("Error loading test history:",e)}finally{y(!1)}},[e]);let N=e&&b?b.map(e=>({id:e.id,timestamp:new Date(e.timestamp).getTime(),mode:e.config.mode||"time",duration:e.config.duration,wordCount:e.config.wordCount,textSource:e.config.textSource||"top-1k",difficulty:e.config.difficulty||"Normal",punctuation:e.config.punctuation||!1,wpm:e.wpm,accuracy:e.accuracy,totalChars:0,correctChars:0,incorrectChars:0})):t,k=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},S=e=>e.charAt(0).toUpperCase()+e.slice(1),A=e=>"time"===e.mode&&e.duration?"".concat(e.duration,"s"):"words"===e.mode&&e.wordCount?"".concat(e.wordCount," words"):"-";return(e?w:l)?(0,a.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"mb-8 h-8 w-1/4 rounded bg-gray-200"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-12 rounded bg-gray-200"}),(0,a.jsx)("div",{className:"h-12 rounded bg-gray-200"}),(0,a.jsx)("div",{className:"h-12 rounded bg-gray-200"})]})]})}):j?(0,a.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,a.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4",children:(0,a.jsx)("p",{className:"text-red-800",children:"Error loading test history. Please try again later."})})}):(0,a.jsxs)("div",{className:"container mx-auto max-w-7xl px-6 py-8",children:[!e&&(0,a.jsx)(F,{}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:"Profile"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"View your typing test history and track your progress over time."})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(q,{testHistory:N})}),(0,a.jsxs)(v.Zp,{className:"mb-8",children:[(0,a.jsxs)(v.aR,{children:[(0,a.jsx)(v.ZB,{children:"Performance Over Time"}),(0,a.jsx)(v.BT,{children:"Track your typing speed progress across all your tests"})]}),(0,a.jsx)(v.Wu,{children:(0,a.jsx)(L,{testHistory:N})})]}),(0,a.jsx)("div",{className:"rounded-lg border",children:(0,a.jsxs)(d,{children:[(0,a.jsx)(p,{children:0===N.length?"No test history yet. Complete a typing test to see your results here.":"Showing ".concat(N.length," test").concat(1===N.length?"":"s")}),(0,a.jsx)(u,{children:(0,a.jsxs)(h,{children:[(0,a.jsx)(x,{children:"Date"}),(0,a.jsx)(x,{children:"Mode"}),(0,a.jsx)(x,{children:"Details"}),(0,a.jsx)(x,{children:"WPM"}),(0,a.jsx)(x,{children:"Accuracy"}),(0,a.jsx)(x,{children:"Difficulty"}),(0,a.jsx)(x,{children:"Word List"}),(0,a.jsx)(x,{children:"Modifiers"})]})}),(0,a.jsx)(m,{children:0===N.length?(0,a.jsx)(h,{children:(0,a.jsx)(g,{colSpan:8,className:"text-muted-foreground text-center",children:"No tests completed yet"})}):N.map(e=>(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{className:"font-medium",children:k(e.timestamp)}),(0,a.jsx)(g,{children:(0,a.jsx)(f.E,{variant:"secondary",children:S(e.mode)})}),(0,a.jsx)(g,{children:A(e)}),(0,a.jsx)(g,{className:"font-semibold",children:e.wpm}),(0,a.jsx)(g,{children:(0,a.jsxs)("span",{className:e.accuracy>=95?"text-green-600":"",children:[e.accuracy,"%"]})}),(0,a.jsx)(g,{children:(0,a.jsx)(f.E,{variant:"Master"===e.difficulty?"destructive":"Expert"===e.difficulty?"default":"secondary",children:e.difficulty})}),(0,a.jsx)(g,{className:"text-sm",children:e.textSource.replace("-"," ").replace("1k","1K")}),(0,a.jsx)(g,{children:e.punctuation&&(0,a.jsx)(f.E,{variant:"outline",className:"text-xs",children:"Punctuation"})})]},e.id))})]})})]})}},6962:(e,t,r)=>{Promise.resolve().then(r.bind(r,6310))},7227:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(4568);r(7620);var s=r(9649),n=r(615),i=r(3928);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:r,size:n,asChild:c=!1,...l}=e,d=c?s.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:n,className:t})),...l})}},7567:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var a=r(1326);let s="typeamp_token",n=(0,a.v)(e=>({user:null,token:null,login:(t,r)=>{localStorage.setItem(s,r),e({user:t,token:r})},logout:()=>{localStorage.removeItem(s),e({user:null,token:null})},initializeAuth:()=>{let t=localStorage.getItem(s);t&&e({token:t})}}))},7649:(e,t,r)=>{"use strict";r.d(t,{$u:()=>l,Hz:()=>c,XA:()=>d,XP:()=>s,_J:()=>i,od:()=>o,pO:()=>n});let a="typeamp-data";function s(){try{let e=localStorage.getItem(a);if(!e)return[];let t=JSON.parse(e);if(!t.testHistory||!Array.isArray(t.testHistory))return[];return t.testHistory}catch(e){return console.error("Error retrieving test history:",e),[]}}function n(e){try{let t=s(),r={testHistory:[e,...t].slice(0,100),lastUpdated:Date.now()};localStorage.setItem(a,JSON.stringify(r))}catch(e){console.error("Error saving test result:",e)}}function i(){try{localStorage.removeItem(a)}catch(e){console.error("Error clearing test history:",e)}}function o(e){return 0===e.length?0:Math.round(e.reduce((e,t)=>e+t.wpm,0)/e.length)}function c(e){return 0===e.length?0:Math.max(...e.map(e=>e.wpm))}function l(e){return 0===e.length?0:Math.round(e.reduce((e,t)=>e+t.accuracy,0)/e.length)}function d(e){return e.length}},9879:(e,t,r)=>{"use strict";r.d(t,{DY:()=>i,E7:()=>d,GO:()=>h,Lx:()=>o,bS:()=>l,gB:()=>u,zW:()=>c});var a=r(7649);let s="http://localhost:8081";class n{async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(s).concat(e),a={headers:{"Content-Type":"application/json",...t.headers},signal:AbortSignal.timeout(1e4),...t};try{let e,t=await fetch(r,a);try{e=await t.json()}catch(e){throw Error("Server returned invalid response. Status: ".concat(t.status))}if(!t.ok)if(0===t.status||t.status>=500)throw Error("Server is currently unavailable. Please try again later.");else if(404===t.status)throw Error("The requested resource was not found.");else if(401===t.status)throw Error("Invalid credentials. Please check your email and password.");else if(409===t.status)throw Error("An account with this email already exists.");else throw Error((null==e?void 0:e.error)||"Request failed with status ".concat(t.status));return e}catch(e){if(e instanceof Error){if("AbortError"===e.name||"TimeoutError"===e.name)throw Error("Request timed out. Please check your connection and try again.");if(e.message.includes("Failed to fetch")||e.message.includes("NetworkError"))throw Error("Network error. Please check your internet connection and ensure the server is running.");throw e}throw Error("An unexpected error occurred. Please try again.")}}constructor(){var e=this;this.registerUser=async e=>this.makeRequest("/api/auth/register",{method:"POST",body:JSON.stringify(e)}),this.loginUser=async e=>this.makeRequest("/api/auth/login",{method:"POST",body:JSON.stringify(e)}),this.syncLocalHistory=async e=>{let t=(0,a.XP)();if(0===t.length)return null;let r=t.map(e=>({wpm:e.wpm,accuracy:e.accuracy,rawWpm:e.wpm,consistency:null,config:{mode:e.mode,duration:e.duration,wordCount:e.wordCount,textSource:e.textSource,difficulty:e.difficulty,punctuation:e.punctuation},tags:[],timestamp:new Date(e.timestamp).toISOString()})),s=await this.makeRequest("/api/me/tests/bulk",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify({testResults:r})});return(0,a._J)(),s},this.generateChallenge=async(e,t)=>this.makeRequest("/api/generate-challenge",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify({prompt:e})}),this.saveSingleTest=async(e,t)=>{let r={wpm:e.wpm,accuracy:e.accuracy,rawWpm:e.wpm,consistency:null,config:{mode:e.mode,duration:e.duration,wordCount:e.wordCount,textSource:e.textSource,difficulty:e.difficulty,punctuation:e.punctuation},tags:[],timestamp:new Date(e.timestamp).toISOString()};return this.makeRequest("/api/me/tests",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(r)})},this.getWords=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"english1k",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=new URLSearchParams({list:t,limit:r.toString(),randomize:a.toString()});return void 0!==s.punctuation&&n.append("punctuation",s.punctuation.toString()),void 0!==s.numbers&&n.append("numbers",s.numbers.toString()),s.punctuationDensity&&n.append("punctuation_density",s.punctuationDensity),e.makeRequest("/api/words?".concat(n.toString()))},this.getWordLists=async()=>this.makeRequest("/api/words/lists")}}let{registerUser:i,loginUser:o,syncLocalHistory:c,generateChallenge:l,saveSingleTest:d,getWords:u,getWordLists:m}=new n;async function h(e,t){let r=await fetch("".concat(s).concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!r.ok){let e=await r.json(),t=Error("An error occurred while fetching the data.");throw t.info=e,t.status=r.status,t}return r.json()}}},e=>{var t=t=>e(e.s=t);e.O(0,[637,526,353,587,315,358],()=>t(6962)),_N_E=e.O()}]);