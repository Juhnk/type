"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{7649:(t,e,r)=>{r.d(e,{$u:()=>u,Hz:()=>c,XA:()=>h,XP:()=>a,_J:()=>s,od:()=>i,pO:()=>o});let n="typeamp-data";function a(){try{let t=localStorage.getItem(n);if(!t)return[];let e=JSON.parse(t);if(!e.testHistory||!Array.isArray(e.testHistory))return[];return e.testHistory}catch(t){return console.error("Error retrieving test history:",t),[]}}function o(t){try{let e=a(),r={testHistory:[t,...e].slice(0,100),lastUpdated:Date.now()};localStorage.setItem(n,JSON.stringify(r))}catch(t){console.error("Error saving test result:",t)}}function s(){try{localStorage.removeItem(n)}catch(t){console.error("Error clearing test history:",t)}}function i(t){return 0===t.length?0:Math.round(t.reduce((t,e)=>t+e.wpm,0)/t.length)}function c(t){return 0===t.length?0:Math.max(...t.map(t=>t.wpm))}function u(t){return 0===t.length?0:Math.round(t.reduce((t,e)=>t+e.accuracy,0)/t.length)}function h(t){return t.length}},39879:(t,e,r)=>{r.d(e,{DY:()=>s,E7:()=>h,GO:()=>p,Lx:()=>i,bS:()=>u,gB:()=>l,getSettings:()=>g,updateSettings:()=>m,zW:()=>c});var n=r(7649);let a="http://localhost:8081";class o{async makeRequest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(a).concat(t),n={headers:{"Content-Type":"application/json",...e.headers},signal:AbortSignal.timeout(1e4),...e};try{let t,e=await fetch(r,n);try{t=await e.json()}catch(t){throw Error("Server returned invalid response. Status: ".concat(e.status))}if(!e.ok)if(0===e.status||e.status>=500)throw Error("Server is currently unavailable. Please try again later.");else if(404===e.status)throw Error("The requested resource was not found.");else if(401===e.status)throw Error("Invalid credentials. Please check your email and password.");else if(409===e.status)throw Error("An account with this email already exists.");else throw Error((null==t?void 0:t.error)||"Request failed with status ".concat(e.status));return t}catch(t){if(t instanceof Error){if("AbortError"===t.name||"TimeoutError"===t.name)throw Error("Request timed out. Please check your connection and try again.");if(t.message.includes("Failed to fetch")||t.message.includes("NetworkError"))throw Error("Network error. Please check your internet connection and ensure the server is running.");throw t}throw Error("An unexpected error occurred. Please try again.")}}constructor(){var t=this;this.registerUser=async t=>this.makeRequest("/api/auth/register",{method:"POST",body:JSON.stringify(t)}),this.loginUser=async t=>this.makeRequest("/api/auth/login",{method:"POST",body:JSON.stringify(t)}),this.syncLocalHistory=async t=>{let e=(0,n.XP)();if(0===e.length)return null;let r=e.map(t=>({wpm:t.wpm,accuracy:t.accuracy,rawWpm:t.wpm,consistency:null,config:{mode:t.mode,duration:t.duration,wordCount:t.wordCount,textSource:t.textSource,difficulty:t.difficulty,punctuation:t.punctuation},tags:[],timestamp:new Date(t.timestamp).toISOString()})),a=await this.makeRequest("/api/me/tests/bulk",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify({testResults:r})});return(0,n._J)(),a},this.generateChallenge=async(t,e)=>this.makeRequest("/api/generate-challenge",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify({prompt:t})}),this.saveSingleTest=async(t,e)=>{let r={wpm:t.wpm,accuracy:t.accuracy,rawWpm:t.wpm,consistency:null,config:{mode:t.mode,duration:t.duration,wordCount:t.wordCount,textSource:t.textSource,difficulty:t.difficulty,punctuation:t.punctuation},tags:[],timestamp:new Date(t.timestamp).toISOString()};return this.makeRequest("/api/me/tests",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify(r)})},this.getWords=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"english1k",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=new URLSearchParams({list:e,limit:r.toString(),randomize:n.toString()});return void 0!==a.punctuation&&o.append("punctuation",a.punctuation.toString()),void 0!==a.numbers&&o.append("numbers",a.numbers.toString()),a.punctuationDensity&&o.append("punctuation_density",a.punctuationDensity),t.makeRequest("/api/words?".concat(o.toString()))},this.getWordLists=async()=>this.makeRequest("/api/words/lists"),this.getSettings=async t=>this.makeRequest("/api/me/settings",{headers:{Authorization:"Bearer ".concat(t)}}),this.updateSettings=async(t,e)=>this.makeRequest("/api/me/settings",{method:"PUT",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)}),this.resetSettings=async t=>this.makeRequest("/api/me/settings",{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})}}let{registerUser:s,loginUser:i,syncLocalHistory:c,generateChallenge:u,saveSingleTest:h,getWords:l,getWordLists:d,getSettings:g,updateSettings:m,resetSettings:y}=new o;async function p(t,e){let r=await fetch("".concat(a).concat(t),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!r.ok){let t=await r.json(),e=Error("An error occurred while fetching the data.");throw e.info=t,e.status=r.status,e}return r.json()}}}]);