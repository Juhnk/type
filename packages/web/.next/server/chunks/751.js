exports.id=751,exports.ids=[751],exports.modules={4203:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var s=r(68208);let a="typeamp_token",n=(0,s.v)(e=>({user:null,token:null,login:(t,r)=>{localStorage.setItem(a,r),e({user:t,token:r})},logout:()=>{localStorage.removeItem(a),e({user:null,token:null})},initializeAuth:()=>{let t=localStorage.getItem(a);t&&e({token:t})}}))},4967:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,49989,23)),Promise.resolve().then(r.bind(r,81604)),Promise.resolve().then(r.bind(r,49814)),Promise.resolve().then(r.bind(r,71531)),Promise.resolve().then(r.bind(r,9782)),Promise.resolve().then(r.bind(r,73754)),Promise.resolve().then(r.bind(r,59071))},9782:(e,t,r)=>{"use strict";r.d(t,{Header:()=>p});var s=r(13486);r(60159);var a=r(49989),n=r.n(a),o=r(39499),i=r(57956),l=r(74782),d=r(26329),c=r(34606),u=r(74941),m=r(51316),h=r(4203);function p(){let{openAuthModal:e}=(0,m.K)(),{user:t,logout:r}=(0,h.n)();return(0,s.jsxs)("header",{className:"bg-background flex items-center justify-between border-b px-6 py-4",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)(n(),{href:"/",className:"text-xl font-bold",children:"TypeAmp"})}),(0,s.jsxs)("nav",{className:"flex items-center space-x-6",children:[(0,s.jsxs)(n(),{href:"/",className:"text-muted-foreground hover:text-foreground flex items-center space-x-2 transition-colors",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Home"})]}),(0,s.jsxs)(n(),{href:"/profile",className:"text-muted-foreground hover:text-foreground flex items-center space-x-2 transition-colors",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Profile"})]}),(0,s.jsxs)(n(),{href:"/stats",className:"text-muted-foreground hover:text-foreground flex items-center space-x-2 transition-colors",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Stats"})]}),(0,s.jsxs)(n(),{href:"/learn",className:"text-muted-foreground hover:text-foreground flex items-center space-x-2 transition-colors",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Learn"})]}),(0,s.jsxs)(n(),{href:"/customize",className:"text-muted-foreground hover:text-foreground flex items-center space-x-2 transition-colors",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Customize"})]})]}),t?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:t.email}),(0,s.jsx)(u.$,{variant:"outline",onClick:r,children:"Logout"})]}):(0,s.jsx)(u.$,{variant:"outline",onClick:e,children:"Login"})]})}},14276:()=>{},19552:(e,t,r)=>{"use strict";r.d(t,{EnhancedCommandPalette:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call EnhancedCommandPalette() from the server but EnhancedCommandPalette is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/juhnk/repos/type/packages/web/src/components/core/EnhancedCommandPalette.tsx","EnhancedCommandPalette")},23025:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(13486);r(60159);var a=r(26518);function n({className:e,type:t,...r}){return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}},26518:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(4627),a=r(55855);function n(...e){return(0,a.QP)((0,s.$)(e))}},34179:(e,t,r)=>{"use strict";function s(){return[]}function a(e){}function n(){}function o(e){return 0===e.length?0:Math.round(e.reduce((e,t)=>e+t.wpm,0)/e.length)}function i(e){return 0===e.length?0:Math.max(...e.map(e=>e.wpm))}function l(e){return 0===e.length?0:Math.round(e.reduce((e,t)=>e+t.accuracy,0)/e.length)}function d(e){return e.length}r.d(t,{$u:()=>l,Hz:()=>i,XA:()=>d,XP:()=>s,_J:()=>n,od:()=>o,pO:()=>a})},34223:()=>{},36422:(e,t,r)=>{"use strict";r.d(t,{AuthModal:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call AuthModal() from the server but AuthModal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/juhnk/repos/type/packages/web/src/components/auth/AuthModal.tsx","AuthModal")},41571:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(13486),a=r(60159),n=r(44207),o=r(76353),i=r(26518);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.b,{ref:r,className:(0,i.cn)(l(),e),...t}));d.displayName=n.b.displayName},46905:(e,t,r)=>{"use strict";r.d(t,{Xi:()=>d,av:()=>c,j7:()=>l,tU:()=>i});var s=r(13486),a=r(60159),n=r(99087),o=r(26518);let i=n.bL,l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.B8,{ref:r,className:(0,o.cn)("bg-muted text-muted-foreground inline-flex h-10 items-center justify-center rounded-md p-1",e),...t}));l.displayName=n.B8.displayName;let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.l9,{ref:r,className:(0,o.cn)("ring-offset-background focus-visible:ring-ring data-[state=active]:bg-background data-[state=active]:text-foreground inline-flex items-center justify-center rounded-sm px-3 py-1.5 text-sm font-medium whitespace-nowrap transition-all focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm",e),...t}));d.displayName=n.l9.displayName;let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.UC,{ref:r,className:(0,o.cn)("ring-offset-background focus-visible:ring-ring mt-2 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none",e),...t}));c.displayName=n.UC.displayName},49814:(e,t,r)=>{"use strict";r.d(t,{AuthModal:()=>M});var s=r(13486),a=r(60159),n=r(85626),o=r(39439),i=r(67201),l=r(79021),d=r(46905),c=r(90691),u=r(26518),m=r(41571);let h=n.Op,p=a.createContext({}),g=({...e})=>(0,s.jsx)(p.Provider,{value:{name:e.name},children:(0,s.jsx)(n.xI,{...e})}),f=()=>{let e=a.useContext(p),t=a.useContext(x),{getFieldState:r}=(0,n.xW)(),s=(0,n.lN)({name:e.name}),o=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...o}},x=a.createContext({});function v({className:e,...t}){let r=a.useId();return(0,s.jsx)(x.Provider,{value:{id:r},children:(0,s.jsx)("div",{"data-slot":"form-item",className:(0,u.cn)("grid gap-2",e),...t})})}function w({className:e,...t}){let{error:r,formItemId:a}=f();return(0,s.jsx)(m.J,{"data-slot":"form-label","data-error":!!r,className:(0,u.cn)("data-[error=true]:text-destructive",e),htmlFor:a,...t})}function b({...e}){let{error:t,formItemId:r,formDescriptionId:a,formMessageId:n}=f();return(0,s.jsx)(c.DX,{"data-slot":"form-control",id:r,"aria-describedby":t?`${a} ${n}`:`${a}`,"aria-invalid":!!t,...e})}function y({className:e,...t}){let{error:r,formMessageId:a}=f(),n=r?String(r?.message??""):t.children;return n?(0,s.jsx)("p",{"data-slot":"form-message",id:a,className:(0,u.cn)("text-destructive text-sm",e),...t,children:n}):null}var j=r(23025),C=r(74941),S=r(51316),k=r(4203),N=r(64075),P=r(81604);let A=i.Ik({email:i.Yj().email("Please enter a valid email address"),password:i.Yj().min(6,"Password must be at least 6 characters")});function M(){let{isAuthModalOpen:e,closeAuthModal:t}=(0,S.K)(),{login:r}=(0,k.n)(),a=(0,n.mN)({resolver:(0,o.u)(A),defaultValues:{email:"",password:""}}),i=(0,n.mN)({resolver:(0,o.u)(A),defaultValues:{email:"",password:""}}),c=async e=>{try{let s=await (0,N.Lx)({email:e.email,password:e.password});P.o.success("Login successful!"),r(s.user,s.token),t(),a.reset();try{let e=await (0,N.zW)(s.token);e&&P.o.success(`Synced ${e.count} test results to your account`)}catch(e){console.error("History sync error:",e),P.o.error("Failed to sync test history, but login was successful")}}catch(t){let e=t instanceof Error?t.message:"Login failed";P.o.error(e),console.error("Login error:",t)}},u=async e=>{try{let s=await (0,N.DY)({email:e.email,password:e.password});P.o.success("Registration successful!"),r(s.user,s.token),t(),i.reset();try{let e=await (0,N.zW)(s.token);e&&P.o.success(`Synced ${e.count} test results to your account`)}catch(e){console.error("History sync error:",e),P.o.error("Failed to sync test history, but registration was successful")}}catch(t){let e=t instanceof Error?t.message:"Registration failed";P.o.error(e),console.error("Registration error:",t)}};return(0,s.jsx)(l.lG,{open:e,onOpenChange:t,children:(0,s.jsxs)(l.Cf,{className:"sm:max-w-[425px]",children:[(0,s.jsx)(l.c7,{children:(0,s.jsx)(l.L3,{children:"Welcome to TypeAmp"})}),(0,s.jsxs)(d.tU,{defaultValue:"login",className:"w-full",children:[(0,s.jsxs)(d.j7,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(d.Xi,{value:"login",children:"Login"}),(0,s.jsx)(d.Xi,{value:"register",children:"Register"})]}),(0,s.jsx)(d.av,{value:"login",className:"space-y-4",children:(0,s.jsx)(h,{...a,children:(0,s.jsxs)("form",{onSubmit:a.handleSubmit(c),className:"space-y-4",children:[(0,s.jsx)(g,{control:a.control,name:"email",render:({field:e})=>(0,s.jsxs)(v,{children:[(0,s.jsx)(w,{children:"Email"}),(0,s.jsx)(b,{children:(0,s.jsx)(j.p,{type:"email",placeholder:"Enter your email",...e})}),(0,s.jsx)(y,{})]})}),(0,s.jsx)(g,{control:a.control,name:"password",render:({field:e})=>(0,s.jsxs)(v,{children:[(0,s.jsx)(w,{children:"Password"}),(0,s.jsx)(b,{children:(0,s.jsx)(j.p,{type:"password",placeholder:"Enter your password",...e})}),(0,s.jsx)(y,{})]})}),(0,s.jsx)(C.$,{type:"submit",className:"w-full",children:"Sign In"})]})})}),(0,s.jsx)(d.av,{value:"register",className:"space-y-4",children:(0,s.jsx)(h,{...i,children:(0,s.jsxs)("form",{onSubmit:i.handleSubmit(u),className:"space-y-4",children:[(0,s.jsx)(g,{control:i.control,name:"email",render:({field:e})=>(0,s.jsxs)(v,{children:[(0,s.jsx)(w,{children:"Email"}),(0,s.jsx)(b,{children:(0,s.jsx)(j.p,{type:"email",placeholder:"Enter your email",...e})}),(0,s.jsx)(y,{})]})}),(0,s.jsx)(g,{control:i.control,name:"password",render:({field:e})=>(0,s.jsxs)(v,{children:[(0,s.jsx)(w,{children:"Password"}),(0,s.jsx)(b,{children:(0,s.jsx)(j.p,{type:"password",placeholder:"Create a password (min. 6 characters)",...e})}),(0,s.jsx)(y,{})]})}),(0,s.jsx)(C.$,{type:"submit",className:"w-full",children:"Create Account"})]})})})]})]})})}},51316:(e,t,r)=>{"use strict";r.d(t,{K:()=>s});let s=(0,r(68208).v)(e=>({isAuthModalOpen:!1,openAuthModal:()=>e({isAuthModalOpen:!0}),closeAuthModal:()=>e({isAuthModalOpen:!1})}))},59071:(e,t,r)=>{"use strict";r.d(t,{SettingsProvider:()=>n});var s=r(13486);r(60159);var a=r(78042);function n({children:e}){return(0,a.C)(e=>e.settings),(0,s.jsx)(s.Fragment,{children:e})}},62019:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,69355,23)),Promise.resolve().then(r.t.bind(r,54439,23)),Promise.resolve().then(r.t.bind(r,67851,23)),Promise.resolve().then(r.t.bind(r,94730,23)),Promise.resolve().then(r.t.bind(r,19774,23)),Promise.resolve().then(r.t.bind(r,53170,23)),Promise.resolve().then(r.t.bind(r,20968,23)),Promise.resolve().then(r.t.bind(r,78298,23))},63049:(e,t,r)=>{"use strict";r.d(t,{SettingsProvider:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call SettingsProvider() from the server but SettingsProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/juhnk/repos/type/packages/web/src/components/providers/SettingsProvider.tsx","SettingsProvider")},64075:(e,t,r)=>{"use strict";r.d(t,{DY:()=>o,E7:()=>c,GO:()=>f,Lx:()=>i,bS:()=>d,gB:()=>u,getSettings:()=>h,updateSettings:()=>p,zW:()=>l});var s=r(34179);let a="http://localhost:8081";class n{async makeRequest(e,t={}){let r=`${a}${e}`,s={headers:{"Content-Type":"application/json",...t.headers},signal:AbortSignal.timeout(1e4),...t};try{let e,t=await fetch(r,s);try{e=await t.json()}catch{throw Error(`Server returned invalid response. Status: ${t.status}`)}if(!t.ok)if(0===t.status||t.status>=500)throw Error("Server is currently unavailable. Please try again later.");else if(404===t.status)throw Error("The requested resource was not found.");else if(401===t.status)throw Error("Invalid credentials. Please check your email and password.");else if(409===t.status)throw Error("An account with this email already exists.");else throw Error(e?.error||`Request failed with status ${t.status}`);return e}catch(e){if(e instanceof Error){if("AbortError"===e.name||"TimeoutError"===e.name)throw Error("Request timed out. Please check your connection and try again.");if(e.message.includes("Failed to fetch")||e.message.includes("NetworkError"))throw Error("Network error. Please check your internet connection and ensure the server is running.");throw e}throw Error("An unexpected error occurred. Please try again.")}}constructor(){this.registerUser=async e=>this.makeRequest("/api/auth/register",{method:"POST",body:JSON.stringify(e)}),this.loginUser=async e=>this.makeRequest("/api/auth/login",{method:"POST",body:JSON.stringify(e)}),this.syncLocalHistory=async e=>{let t=(0,s.XP)();if(0===t.length)return null;let r=t.map(e=>({wpm:e.wpm,accuracy:e.accuracy,rawWpm:e.wpm,consistency:null,config:{mode:e.mode,duration:e.duration,wordCount:e.wordCount,textSource:e.textSource,difficulty:e.difficulty,punctuation:e.punctuation},tags:[],timestamp:new Date(e.timestamp).toISOString()})),a=await this.makeRequest("/api/me/tests/bulk",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:JSON.stringify({testResults:r})});return(0,s._J)(),a},this.generateChallenge=async(e,t)=>this.makeRequest("/api/generate-challenge",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify({prompt:e})}),this.saveSingleTest=async(e,t)=>{let r={wpm:e.wpm,accuracy:e.accuracy,rawWpm:e.wpm,consistency:null,config:{mode:e.mode,duration:e.duration,wordCount:e.wordCount,textSource:e.textSource,difficulty:e.difficulty,punctuation:e.punctuation},tags:[],timestamp:new Date(e.timestamp).toISOString()};return this.makeRequest("/api/me/tests",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify(r)})},this.getWords=async(e="english1k",t=100,r=!0,s={})=>{let a=new URLSearchParams({list:e,limit:t.toString(),randomize:r.toString()});return void 0!==s.punctuation&&a.append("punctuation",s.punctuation.toString()),void 0!==s.numbers&&a.append("numbers",s.numbers.toString()),s.punctuationDensity&&a.append("punctuation_density",s.punctuationDensity),this.makeRequest(`/api/words?${a.toString()}`)},this.getWordLists=async()=>this.makeRequest("/api/words/lists"),this.getSettings=async e=>this.makeRequest("/api/me/settings",{headers:{Authorization:`Bearer ${e}`}}),this.updateSettings=async(e,t)=>this.makeRequest("/api/me/settings",{method:"PUT",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify(e)}),this.resetSettings=async e=>this.makeRequest("/api/me/settings",{method:"DELETE",headers:{Authorization:`Bearer ${e}`}})}}let{registerUser:o,loginUser:i,syncLocalHistory:l,generateChallenge:d,saveSingleTest:c,getWords:u,getWordLists:m,getSettings:h,updateSettings:p,resetSettings:g}=new n;async function f(e,t){let r=await fetch(`${a}${e}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok){let e=await r.json(),t=Error("An error occurred while fetching the data.");throw t.info=e,t.status=r.status,t}return r.json()}},64909:(e,t,r)=>{"use strict";r.d(t,{T:()=>f});var s=r(68208),a=r(34179),n=r(64075),o=r(4203);function i(e,t){if(!e||0===e.length)throw Error("No words provided for text generation");switch(t.mode){case"time":return function(e,t,r){let s=l(e,Math.ceil(t/60*48));return r?d(s):s.join(" ")}(e,t.duration,t.punctuation);case"words":return function(e,t,r){let s=l(e,t);return r?d(s):s.join(" ")}(e,t.wordCount,t.punctuation);case"quote":return function(e,t){let r=[],s=0,a=Math.floor(3*Math.random())+3;for(let n=0;n<a;n++){let a=Math.floor(11*Math.random())+5,n=[];for(let t=0;t<a;t++)n.push(e[s%e.length]),s++;n.length>0&&(n[0]=c(n[0]));let o=n.join(" ");r.push(t?o+".":o)}return r.join(" ")}(e,t.punctuation);default:return e.slice(0,50).join(" ")}}function l(e,t){let r=[],s=0;for(;r.length<t;)r.push(e[s%e.length]),s++;return r.slice(0,t)}function d(e){if(!e.length)return"";let t=[],r=[],s=0,a=[()=>Math.floor(25*Math.random())+2e3,()=>Math.floor(100*Math.random())+1,()=>(100*Math.random()).toFixed(1)+"%",()=>"$"+(1e3*Math.random()).toFixed(2),()=>Math.floor(12*Math.random())+1,()=>Math.floor(31*Math.random())+1];for(;s<e.length;){let n=Math.floor(13*Math.random())+6;r=[];for(let t=0;t<n&&s<e.length;t++){let o=e[s];if(.08>Math.random()){let e=a[Math.floor(Math.random()*a.length)];r.push(e().toString()),.7>Math.random()&&(r.push(o),s++);continue}if(t>2&&t<n-2&&.15>Math.random()&&(o+=","),.12>Math.random()){let e={it:["it's","it'll"],do:["don't","doesn't"],can:["can't","cannot"],will:["won't","we'll"],have:["haven't","hasn't"],would:["wouldn't","we'd"],could:["couldn't","could've"],should:["shouldn't","should've"],i:["I'm","I'll","I've","I'd"],you:["you're","you'll","you've","you'd"],we:["we're","we'll","we've","we'd"],they:["they're","they'll","they've","they'd"]},t=o.toLowerCase();if(e[t]&&.6>Math.random()){let r=e[t];o=r[Math.floor(Math.random()*r.length)]}else .05>Math.random()&&(o+="'s")}r.push(o),s++}if(r.length>0&&(r[0]=c(r[0])),r.length>0){let e=r.length-1,t=r[e],s=Math.random();s<.05?r[e]=t+"?":s<.08?r[e]=t+"!":s<.02?r[e]=t+"...":r[e]=t+"."}r.length>0&&t.push(r.join(" "))}if(t.length>1&&.08>Math.random()){let e=Math.floor(Math.random()*t.length);t[e]=`"${t[e]}"`}return function(e){let t=e;if(.02>Math.random()&&(t=t.replace(/\. ([A-Z])/g,(e,t)=>.3>Math.random()?`; ${t.toLowerCase()}`:e)),.01>Math.random()&&(t=t.replace(/\. ([A-Z][^.]*\.)/g,(e,t)=>.5>Math.random()?`: ${t.toLowerCase()}`:e)),.03>Math.random()){let e=t.split(" ");if(e.length>10){let r=Math.floor(Math.random()*(e.length-5))+3,s=["like this","for example","of course","obviously","naturally"],a=s[Math.floor(Math.random()*s.length)];e.splice(r,0,`(${a})`),t=e.join(" ")}}return t}(t.join(" "))}function c(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function u(e){return i(["the","quick","brown","fox","jumps","over","lazy","dog","and","runs","through","forest","with","great","speed","while","birds","sing","above","trees","under","bright","blue","sky","during","sunny","afternoon","near","peaceful","river","flowing","gently","towards","distant","mountains","where","eagles","soar","high","among","white","clouds","drifting","slowly","across","vast","horizon","beneath","warm","golden","sunlight","shining"],e)}let m={mode:"time",duration:60,wordCount:50,difficulty:"Normal",textSource:"english1k",punctuation:!1},h={wpm:0,accuracy:0,startTime:0,totalChars:0,correctChars:0,incorrectChars:0,elapsedTime:0},p={lines:[],scrollOffset:0,lineCharOffsets:[]},g="the quick brown fox jumps over the lazy dog",f=(0,s.v)((e,t)=>({testConfig:m,textToType:g,charStates:g.split("").map(e=>({char:e,status:"default"})),userInput:"",gameStatus:"ready",stats:h,isLoadingWords:!1,wordsError:null,words:[],isPreparingGame:!1,gamePreparationError:null,textWindow:p,maxCharsPerLine:70,isContentStreaming:!1,timeRemaining:0,isTimerRunning:!1,gameStartTime:null,timerId:null,wordsCompleted:0,targetWordCount:0,wordsProgress:0,currentWordIndex:0,wordBoundaries:[],testFailed:!1,failureReason:null,setTestConfig:r=>{let{gameStatus:s}=t(),a=t().testConfig;if((void 0!==r.duration||void 0!==r.mode)&&t().resetTimer(),e(e=>({testConfig:{...e.testConfig,...r}})),Object.keys(r).some(e=>r[e]!==a[e])&&"running"!==s&&t().prepareGame(),"time"===r.mode||void 0!==r.duration&&"time"===t().testConfig.mode){let{duration:r}=t().testConfig;e({timeRemaining:1e3*r})}},setTextToType:r=>{let s=t().calculateWordBoundaries(r),{testConfig:a}=t();t().initializeTextWindow(r),e({textToType:r,charStates:r.split("").map((e,t)=>({char:e,status:0===t?"current":"default"})),userInput:"",gameStatus:"ready",wordBoundaries:s,wordsCompleted:0,wordsProgress:0,currentWordIndex:0,targetWordCount:"words"===a.mode?a.wordCount:0})},loadWordsFromAPI:async()=>{let{testConfig:r}=t();e({isLoadingWords:!0,wordsError:null});try{let s=100;"words"===r.mode?s=r.wordCount:"time"===r.mode&&(s=Math.max(100,Math.ceil(40*r.duration/60)));let a=await (0,n.gB)(r.textSource,s,!0,{punctuation:r.punctuation,numbers:r.punctuation,punctuationDensity:"medium"});if(a.words&&a.words.length>0){let e=a.enhanced_text||a.words.join(" ");t().setTextToType(e)}else throw Error("No words received from API");e({isLoadingWords:!1})}catch(t){e({isLoadingWords:!1,wordsError:t instanceof Error?t.message:"Failed to load words",textToType:g,charStates:g.split("").map(e=>({char:e,status:"default"}))}),console.error("Failed to load words from API:",t)}},prepareGame:async()=>{let{testConfig:r}=t();e({isPreparingGame:!0,gamePreparationError:null});try{let s=100;"words"===r.mode?s=r.wordCount:"time"===r.mode?s=Math.max(100,Math.ceil(50*r.duration/60)):"quote"===r.mode&&(s=200);let a=await (0,n.gB)(r.textSource,s,!0,{punctuation:r.punctuation,numbers:r.punctuation,punctuationDensity:"medium"});if(a.words&&a.words.length>0){e({words:a.words});let s=a.enhanced_text||i(a.words,r),n=s.split("").map((e,t)=>({char:e,status:0===t?"current":"default"})),o=t().calculateWordBoundaries(s);t().initializeTextWindow(s),e({textToType:s,charStates:n,userInput:"",gameStatus:"ready",isPreparingGame:!1,gamePreparationError:null,timeRemaining:"time"===r.mode?1e3*r.duration:0,wordBoundaries:o,wordsCompleted:0,wordsProgress:0,currentWordIndex:0,targetWordCount:"words"===r.mode?r.wordCount:0})}else throw Error("No words received from API")}catch(i){let s=i instanceof Error?i.message:"Failed to prepare game",a=u(r),n=a.split("").map((e,t)=>({char:e,status:0===t?"current":"default"})),o=t().calculateWordBoundaries(a);t().initializeTextWindow(a),e({isPreparingGame:!1,gamePreparationError:s,textToType:a,charStates:n,userInput:"",gameStatus:"ready",timeRemaining:"time"===r.mode?1e3*r.duration:0,wordBoundaries:o,wordsCompleted:0,wordsProgress:0,currentWordIndex:0,targetWordCount:"words"===r.mode?r.wordCount:0}),console.error("Failed to prepare game:",i)}},resetGamePreparation:()=>{e({isPreparingGame:!1,gamePreparationError:null})},useFallbackWords:()=>{let{testConfig:r}=t(),s=u(r),a=s.split("").map((e,t)=>({char:e,status:0===t?"current":"default"})),n=t().calculateWordBoundaries(s);e({textToType:s,charStates:a,userInput:"",gameStatus:"ready",isPreparingGame:!1,gamePreparationError:null,timeRemaining:"time"===r.mode?1e3*r.duration:0,wordBoundaries:n,wordsCompleted:0,wordsProgress:0,currentWordIndex:0,targetWordCount:"words"===r.mode?r.wordCount:0})},handleKeyPress:r=>e(s=>{let{gameStatus:a,userInput:n,textToType:o,testConfig:i,wordBoundaries:l}=s;if("ready"===a){let r=Date.now();e({gameStatus:"running",stats:{...s.stats,startTime:r}}),t().startTimer()}if("Backspace"===r){if(0===n.length)return{};let e=n.slice(0,-1),r=[...s.charStates];return r[n.length-1]&&(r[n.length-1].status="default"),r[e.length]&&(r[e.length].status="current"),t().updateStats(),"words"===s.testConfig.mode&&setTimeout(()=>{t().updateWordProgress()},0),{userInput:e,charStates:r}}if(1===r.length&&n.length<o.length){let a=n.length,d=o[a],c=r===d;if("Master"===i.difficulty&&!c)return e({gameStatus:"finished",testFailed:!0,failureReason:`Master Mode: Failed on incorrect keystroke '${r}' (expected '${d}')`}),t().completeGame(),{};let u=n+r,m=[...s.charStates];if(m[a]={char:d,status:c?"correct":"incorrect",timestamp:Date.now()},m[a+1]&&(m[a+1].status="current"),"Expert"===i.difficulty&&" "===r){let r=l.findIndex(e=>e>a)-1;if(r>=0){let s=l[r],n=!1;for(let e=s;e<a;e++)if(m[e]&&"incorrect"===m[e].status){n=!0;break}if(n){let r=o.slice(s,a);return e({gameStatus:"finished",testFailed:!0,failureReason:`Expert Mode: Failed due to errors in word "${r}"`}),t().completeGame(),{}}}}return setTimeout(()=>{t().updateStats(),t().updateWordProgress(),t().checkWordCompletion(),t().updateTextWindow(),"words"!==i.mode&&u.length>=o.length&&t().completeGame()},0),{userInput:u,charStates:m}}return{}}),startGame:()=>{let r=Date.now();e({gameStatus:"running",stats:{...t().stats,startTime:r}}),t().startTimer()},pauseGame:()=>{t().pauseTimer(),e({gameStatus:"paused"})},resumeGame:()=>{e({gameStatus:"running"});let{testConfig:r,timeRemaining:s}=t();"time"===r.mode&&s>0&&t().startTimer()},resetGame:()=>{t().resetTimer();let{textToType:r}=t();e({userInput:"",gameStatus:"ready",stats:h,charStates:r.split("").map((e,t)=>({char:e,status:0===t?"current":"default"})),wordsCompleted:0,wordsProgress:0,currentWordIndex:0,testFailed:!1,failureReason:null})},completeGame:async()=>{t().clearTimer();let r=Date.now(),s=t(),i={...s.stats,endTime:r,elapsedTime:r-s.stats.startTime},l={id:`test-${r}-${Math.random().toString(36).substr(2,9)}`,timestamp:r,mode:s.testConfig.mode,duration:"time"===s.testConfig.mode?s.testConfig.duration:void 0,wordCount:"words"===s.testConfig.mode?s.testConfig.wordCount:void 0,textSource:s.testConfig.textSource,difficulty:s.testConfig.difficulty,punctuation:s.testConfig.punctuation,wpm:i.wpm,accuracy:i.accuracy,totalChars:i.totalChars,correctChars:i.correctChars,incorrectChars:i.incorrectChars},{token:d}=o.n.getState();if(d)try{await (0,n.E7)(l,d)}catch(e){console.error("Failed to save test result to backend:",e),(0,a.pO)(l)}else(0,a.pO)(l);e({gameStatus:"finished",stats:i})},updateStats:()=>e(e=>{let{userInput:t,textToType:r,stats:s}=e,a=Date.now()-s.startTime,n=a/6e4,o=t.split("").filter((e,t)=>e===r[t]).length,i=t.length-o,l=t.length,d=n>0?Math.round(o/5/n):0,c=l>0?Math.round(o/l*100):100;return{stats:{...s,wpm:d,accuracy:c,totalChars:l,correctChars:o,incorrectChars:i,elapsedTime:a}}}),startTimer:()=>{let{testConfig:r,timerId:s}=t();if("time"!==r.mode)return;s&&clearInterval(s);let a=1e3*r.duration,n=Date.now();e({timeRemaining:a,isTimerRunning:!0,gameStartTime:n});let o=setInterval(()=>{let r=Math.max(0,a-(Date.now()-n));e({timeRemaining:r}),r<=0&&t().completeGame()},100);e({timerId:o})},pauseTimer:()=>{let{timerId:r}=t();r&&(clearInterval(r),e({timerId:null,isTimerRunning:!1}))},resetTimer:()=>{let{timerId:r,testConfig:s}=t();r&&clearInterval(r),e({timerId:null,timeRemaining:"time"===s.mode?1e3*s.duration:0,isTimerRunning:!1,gameStartTime:null})},updateTimer:()=>{let{gameStartTime:r,testConfig:s}=t();if(!r||"time"!==s.mode)return;let a=Date.now(),n=Math.max(0,1e3*s.duration-(a-r));e({timeRemaining:n}),n<=0&&t().completeGame()},clearTimer:()=>{let{timerId:r}=t();r&&(clearInterval(r),e({timerId:null}))},calculateWordBoundaries:e=>{let t=[],r=!1;for(let s=0;s<e.length;s++){let a=" "!==e[s];a&&!r?(t.push(s),r=!0):!a&&r&&(r=!1)}return t},updateWordProgress:()=>{let{userInput:r,textToType:s,testConfig:a,wordBoundaries:n,charStates:o}=t();if("words"!==a.mode)return;let i=0,l=0,d=[];for(let e=0;e<n.length;e++){let t=n[e],r=e<n.length-1?n[e+1]:s.length,a=t;for(;a<r&&" "!==s[a];)a++;d.push({start:t,end:a,text:s.slice(t,a)})}for(let e=0;e<d.length&&e<a.wordCount;e++){let t=d[e];if(r.length>t.end){let r=!0;for(let e=t.start;e<t.end;e++)if(o[e]?.status!=="correct"){r=!1;break}r&&i++,l=e+1}else if(r.length>=t.start){l=e;break}}let c=a.wordCount,u=Math.min(100,i/c*100);e({wordsCompleted:i,wordsProgress:u,currentWordIndex:l,targetWordCount:c})},checkWordCompletion:()=>{let{wordsCompleted:e,testConfig:r}=t();"words"===r.mode&&e>=r.wordCount&&t().completeGame()},generateTextInLines:e=>{let{maxCharsPerLine:r}=t(),s=[],a="";for(let t of e){let e=a?`${a} ${t}`:t;e.length<=r?a=e:a?(s.push(a),a=t):(s.push(t),a="")}return a&&s.push(a),s},initializeTextWindow:r=>{let{testConfig:s}=t();if("time"===s.mode){let s=r.split(" "),a=t().generateTextInLines(s),n=[],o=0;for(let e=0;e<a.length;e++)n.push(o),o+=a[e].length,e<a.length-1&&(o+=1);e({textWindow:{lines:a,scrollOffset:0,lineCharOffsets:n}})}else e({textWindow:{...p,lines:[r]}})},updateTextWindow:()=>{let{testConfig:e}=t();"time"===e.mode&&t().checkLineProgression()},checkLineProgression:()=>{let{userInput:r,textWindow:s,testConfig:a}=t();if("time"!==a.mode)return;let n=r.length,{lineCharOffsets:o,scrollOffset:i,lines:l}=s,d=0;for(let e=0;e<o.length;e++)if(n>=o[e])d=e;else break;let c=i+1;if(d===c&&c<l.length-1&&void 0!==o[c]&&n>o[c]){let t=i+1;t!==i&&t<l.length-2&&e({textWindow:{...s,scrollOffset:t}})}n>.8*l.join(" ").length&&t().generateMoreContent()},scrollToNextLine:()=>{},generateMoreContent:async()=>{let{testConfig:r,isContentStreaming:s}=t();if("time"===r.mode&&!s){e({isContentStreaming:!0});try{let e=await (0,n.gB)(r.textSource,50,!0,{punctuation:r.punctuation,numbers:r.punctuation,punctuationDensity:"medium"});e.words&&e.words.length>0&&t().appendDynamicContent(e.words)}catch(e){console.error("Failed to generate more content:",e),t().appendDynamicContent(["the","quick","brown","fox","jumps","over","lazy","dog","pack","my","box","with","five","dozen","liquor","jugs"])}finally{e({isContentStreaming:!1})}}},appendDynamicContent:r=>{let{textToType:s,textWindow:a,charStates:n}=t(),o=s+" "+r.join(" "),i=o.split(" "),l=t().generateTextInLines(i),d=[],c=0;for(let e=0;e<l.length;e++)d.push(c),c+=l[e].length,e<l.length-1&&(c+=1);let u=[...n];for(let e=n.length;e<o.length;e++)u.push({char:o[e],status:"default"});e({textToType:o,charStates:u,textWindow:{...a,lines:l,lineCharOffsets:d}})}}))},67756:(e,t,r)=>{"use strict";r.d(t,{Header:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call Header() from the server but Header is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/juhnk/repos/type/packages/web/src/components/layout/Header.tsx","Header")},71531:(e,t,r)=>{"use strict";r.d(t,{EnhancedCommandPalette:()=>R});var s=r(13486),a=r(60159),n=r(27026),o=r(35795),i=r(26518),l=r(79021);function d({className:e,...t}){return(0,s.jsx)(n.uB,{"data-slot":"command",className:(0,i.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function c({title:e="Command Palette",description:t="Search for a command to run...",children:r,className:a,showCloseButton:n=!0,...o}){return(0,s.jsxs)(l.lG,{...o,children:[(0,s.jsxs)(l.c7,{className:"sr-only",children:[(0,s.jsx)(l.L3,{children:e}),(0,s.jsx)(l.rr,{children:t})]}),(0,s.jsx)(l.Cf,{className:(0,i.cn)("overflow-hidden p-0",a),showCloseButton:n,children:(0,s.jsx)(d,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:r})})]})}function u({className:e,...t}){return(0,s.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,s.jsx)(o.A,{className:"size-4 shrink-0 opacity-50"}),(0,s.jsx)(n.uB.Input,{"data-slot":"command-input",className:(0,i.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function m({className:e,...t}){return(0,s.jsx)(n.uB.List,{"data-slot":"command-list",className:(0,i.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function h({...e}){return(0,s.jsx)(n.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function p({className:e,...t}){return(0,s.jsx)(n.uB.Group,{"data-slot":"command-group",className:(0,i.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function g({className:e,...t}){return(0,s.jsx)(n.uB.Separator,{"data-slot":"command-separator",className:(0,i.cn)("bg-border -mx-1 h-px",e),...t})}function f({className:e,...t}){return(0,s.jsx)(n.uB.Item,{"data-slot":"command-item",className:(0,i.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function x({className:e,...t}){return(0,s.jsx)("span",{"data-slot":"command-shortcut",className:(0,i.cn)("text-muted-foreground ml-auto text-xs tracking-widest",e),...t})}var v=r(64909),w=r(23365),b=r(31207),y=r(9575),j=r(66),C=r(82376),S=r(85700),k=r(86e3),N=r(72513),P=r(44022),A=r(61289),M=r(49391),T=r(15577),E=r(59203),W=r(34606),I=r(81604);function R(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(!1),[o,l]=(0,a.useState)(""),{setTestConfig:d,resetGame:R,gameStatus:F,isPreparingGame:L,testConfig:{mode:z,duration:D,wordCount:$,difficulty:_,textSource:B,punctuation:q}}=(0,v.T)(),[O,G]=(0,a.useState)([]),J=(0,a.useCallback)(async(e,r=!0,s)=>{("running"!==F||window.confirm("Changing settings will reset your current game. Continue?"))&&(n(!0),t(!1),e(),r&&I.o.success(s||"Configuration updated",{description:"New game prepared with updated settings",duration:2e3}),setTimeout(()=>{n(!1)},300))},[F]),H=(0,a.useMemo)(()=>{let e=[{id:"mode-time",label:"Time Mode",icon:(0,s.jsx)(w.A,{className:"h-4 w-4"}),shortcut:"T",action:()=>d({mode:"time"}),isActive:"time"===z,description:"Type for a set duration"},{id:"mode-words",label:"Words Mode",icon:(0,s.jsx)(b.A,{className:"h-4 w-4"}),shortcut:"W",action:()=>d({mode:"words"}),isActive:"words"===z,description:"Type a specific number of words"},{id:"mode-quote",label:"Quote Mode",icon:(0,s.jsx)(y.A,{className:"h-4 w-4"}),shortcut:"Q",action:()=>d({mode:"quote"}),isActive:"quote"===z,description:"Type a custom quote or text"}],t="time"===z?[{id:"duration-15",label:"15 seconds",icon:(0,s.jsx)(j.A,{className:"h-4 w-4"}),shortcut:"1",action:()=>d({duration:15}),isActive:15===D},{id:"duration-30",label:"30 seconds",icon:(0,s.jsx)(j.A,{className:"h-4 w-4"}),shortcut:"2",action:()=>d({duration:30}),isActive:30===D},{id:"duration-60",label:"60 seconds",icon:(0,s.jsx)(j.A,{className:"h-4 w-4"}),shortcut:"3",action:()=>d({duration:60}),isActive:60===D},{id:"duration-120",label:"120 seconds",icon:(0,s.jsx)(j.A,{className:"h-4 w-4"}),shortcut:"4",action:()=>d({duration:120}),isActive:120===D}]:[],r="words"===z?[{id:"words-10",label:"10 words",icon:(0,s.jsx)(b.A,{className:"h-4 w-4"}),shortcut:"1",action:()=>d({wordCount:10}),isActive:10===$},{id:"words-25",label:"25 words",icon:(0,s.jsx)(b.A,{className:"h-4 w-4"}),shortcut:"2",action:()=>d({wordCount:25}),isActive:25===$},{id:"words-50",label:"50 words",icon:(0,s.jsx)(b.A,{className:"h-4 w-4"}),shortcut:"3",action:()=>d({wordCount:50}),isActive:50===$},{id:"words-100",label:"100 words",icon:(0,s.jsx)(b.A,{className:"h-4 w-4"}),shortcut:"4",action:()=>d({wordCount:100}),isActive:100===$}]:[],a=[{id:"difficulty-normal",label:"Normal Mode",icon:(0,s.jsx)(C.A,{className:"h-4 w-4"}),action:()=>d({difficulty:"Normal"}),isActive:"Normal"===_,description:"Standard typing experience"},{id:"difficulty-expert",label:"Expert Mode",icon:(0,s.jsx)(S.A,{className:"h-4 w-4"}),action:()=>d({difficulty:"Expert"}),isActive:"Expert"===_,description:"No errors allowed per word"},{id:"difficulty-master",label:"Master Mode",icon:(0,s.jsx)(k.A,{className:"h-4 w-4"}),action:()=>d({difficulty:"Master"}),isActive:"Master"===_,description:"One mistake ends the test"}];return{modeCommands:e,durationCommands:t,wordCountCommands:r,difficultyCommands:a,wordListCommands:[{id:"list-english1k",label:"English 1K",icon:(0,s.jsx)(N.A,{className:"h-4 w-4"}),action:()=>d({textSource:"english1k"}),isActive:"english1k"===B,description:"Top 1000 English words"},{id:"list-english10k",label:"English 10K",icon:(0,s.jsx)(N.A,{className:"h-4 w-4"}),action:()=>d({textSource:"english10k"}),isActive:"english10k"===B,description:"Top 10000 English words"},{id:"list-javascript",label:"JavaScript",icon:(0,s.jsx)(P.A,{className:"h-4 w-4"}),action:()=>d({textSource:"javascript"}),isActive:"javascript"===B,description:"JavaScript keywords and syntax"},{id:"list-python",label:"Python",icon:(0,s.jsx)(P.A,{className:"h-4 w-4"}),action:()=>d({textSource:"python"}),isActive:"python"===B,description:"Python keywords and syntax"}],modifierCommands:[{id:"toggle-punctuation",label:"Punctuation & Numbers",icon:(0,s.jsx)(A.A,{className:"h-4 w-4"}),shortcut:"P",action:()=>d({punctuation:!q}),isActive:q,description:"Add punctuation and numbers to text"}]}},[z,D,$,_,B,q,d]),U=(e,t)=>t?e.filter(e=>e.label.toLowerCase().includes(t.toLowerCase())||e.description?.toLowerCase().includes(t.toLowerCase())):e,K=e=>(0,s.jsxs)(f,{value:e.label,onSelect:()=>J(e.action,!0,`${e.label} activated`),className:"flex cursor-pointer items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,i.cn)("transition-all",e.isActive?"text-primary":"opacity-50"),children:e.isActive?(0,s.jsx)(M.A,{className:"h-4 w-4"}):e.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.label}),e.description&&(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:e.description})]})]}),e.shortcut&&(0,s.jsx)(x,{children:e.shortcut})]},e.id);return(0,s.jsxs)(s.Fragment,{children:[(r||L)&&(0,s.jsx)("div",{className:"bg-background/80 fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsx)(T.A,{className:"text-primary h-8 w-8 animate-spin"}),(0,s.jsx)("p",{className:"text-muted-foreground animate-pulse text-sm",children:"Preparing new game..."})]})}),(0,s.jsxs)(c,{open:e,onOpenChange:t,children:[(0,s.jsx)(u,{placeholder:"Search commands...",value:o,onValueChange:l}),(0,s.jsxs)(m,{children:[(0,s.jsx)(h,{children:"No commands found."}),(0,s.jsxs)(p,{heading:"Quick Actions",children:[(0,s.jsxs)(f,{value:"reset",onSelect:()=>J(()=>R(),!1),className:"flex cursor-pointer items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(E.A,{className:"h-4 w-4"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:"Reset Current Game"}),(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:"Start over with current settings"})]})]}),(0,s.jsx)(x,{children:"R"})]}),O.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{className:"my-2"}),(0,s.jsx)("div",{className:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:"Recent"}),O.slice(0,3).map((e,t)=>(0,s.jsxs)(f,{value:`recent-${e.label}`,onSelect:()=>J(()=>{Object.entries(e.config).forEach(([e,t])=>{d({[e]:t})})},!0,`Loaded: ${e.label}`),className:"flex cursor-pointer items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(W.A,{className:"h-4 w-4 opacity-50"}),(0,s.jsx)("div",{className:"text-sm",children:e.label})]}),(0,s.jsx)("div",{className:"text-muted-foreground text-xs",children:new Date(e.timestamp).toLocaleDateString()})]},`recent-${t}`))]})]}),(0,s.jsx)(g,{}),(0,s.jsx)(p,{heading:"Game Mode",children:U(H.modeCommands,o).map(K)}),"time"===z&&H.durationCommands.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{}),(0,s.jsx)(p,{heading:"Time Duration",children:U(H.durationCommands,o).map(K)})]}),"words"===z&&H.wordCountCommands.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{}),(0,s.jsx)(p,{heading:"Word Count",children:U(H.wordCountCommands,o).map(K)})]}),(0,s.jsx)(g,{}),(0,s.jsx)(p,{heading:"Difficulty",children:U(H.difficultyCommands,o).map(K)}),(0,s.jsx)(g,{}),(0,s.jsx)(p,{heading:"Word Lists",children:U(H.wordListCommands,o).map(K)}),(0,s.jsx)(g,{}),(0,s.jsx)(p,{heading:"Modifiers",children:U(H.modifierCommands,o).map(K)}),(0,s.jsx)("div",{className:"text-muted-foreground border-t px-3 py-2 text-xs",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{children:["Press ",(0,s.jsx)("kbd",{className:"bg-muted rounded px-1",children:"Ctrl+K"})," to toggle"]}),(0,s.jsxs)("span",{children:["Use ",(0,s.jsx)("kbd",{className:"bg-muted rounded px-1",children:"↑↓"})," to navigate"]})]})})]})]})]})}},73754:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>n});var s=r(13486);r(60159);var a=r(4203);function n({children:e}){let{initializeAuth:t}=(0,a.n)();return(0,s.jsx)(s.Fragment,{children:e})}},74941:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var s=r(13486);r(60159);var a=r(90691),n=r(76353),o=r(26518);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l({className:e,variant:t,size:r,asChild:n=!1,...l}){let d=n?a.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,o.cn)(i({variant:t,size:r,className:e})),...l})}},76091:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,30385,23)),Promise.resolve().then(r.t.bind(r,33737,23)),Promise.resolve().then(r.t.bind(r,86081,23)),Promise.resolve().then(r.t.bind(r,1904,23)),Promise.resolve().then(r.t.bind(r,35856,23)),Promise.resolve().then(r.t.bind(r,55492,23)),Promise.resolve().then(r.t.bind(r,89082,23)),Promise.resolve().then(r.t.bind(r,45812,23))},77280:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/juhnk/repos/type/packages/web/src/components/providers/AuthProvider.tsx","AuthProvider")},78042:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var s=r(68208),a=r(61009);let n={appearance:{theme:"slate",font:"Roboto Mono",fontSize:18,caretStyle:"line",caretColor:"#3b82f6",colorScheme:"auto",animations:!0,smoothCaret:!0,showWpmCounter:!0,showAccuracyCounter:!0},behavior:{soundEffects:!1,keyFeedback:!1,defaultMode:"time",defaultDifficulty:"Normal",defaultDuration:60,defaultWordCount:50,paceCaretWpm:0,paceCaretEnabled:!1,autoSave:!0,focusMode:!1,quickRestart:!0,blindMode:!1}},o=(0,s.v)()((0,a.Zr)((e,t)=>({settings:n,isLoading:!1,updateTheme:t=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,theme:t}}})),updateFont:t=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,font:t}}})),updateFontSize:t=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,fontSize:t}}})),updateCaretStyle:t=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,caretStyle:t}}})),updateCaretColor:t=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,caretColor:t}}})),updateColorScheme:t=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,colorScheme:t}}})),toggleAnimations:()=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,animations:!e.settings.appearance.animations}}})),toggleSmoothCaret:()=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,smoothCaret:!e.settings.appearance.smoothCaret}}})),toggleWpmCounter:()=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,showWpmCounter:!e.settings.appearance.showWpmCounter}}})),toggleAccuracyCounter:()=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,showAccuracyCounter:!e.settings.appearance.showAccuracyCounter}}})),toggleSoundEffects:()=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,soundEffects:!e.settings.behavior.soundEffects}}})),toggleKeyFeedback:()=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,keyFeedback:!e.settings.behavior.keyFeedback}}})),updateDefaultMode:t=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,defaultMode:t}}})),updateDefaultDifficulty:t=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,defaultDifficulty:t}}})),updateDefaultDuration:t=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,defaultDuration:t}}})),updateDefaultWordCount:t=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,defaultWordCount:t}}})),updatePaceCaretWpm:t=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,paceCaretWpm:t}}})),togglePaceCaret:()=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,paceCaretEnabled:!e.settings.behavior.paceCaretEnabled}}})),toggleAutoSave:()=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,autoSave:!e.settings.behavior.autoSave}}})),toggleFocusMode:()=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,focusMode:!e.settings.behavior.focusMode}}})),toggleQuickRestart:()=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,quickRestart:!e.settings.behavior.quickRestart}}})),toggleBlindMode:()=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,blindMode:!e.settings.behavior.blindMode}}})),updateAppearanceSettings:t=>e(e=>({settings:{...e.settings,appearance:{...e.settings.appearance,...t}}})),updateBehaviorSettings:t=>e(e=>({settings:{...e.settings,behavior:{...e.settings.behavior,...t}}})),resetToDefaults:()=>e({settings:n}),importSettings:t=>e({settings:t}),exportSettings:()=>t().settings,saveToServer:async()=>{try{e({isLoading:!0});let{settings:s}=t(),a=localStorage.getItem("token");if(!a)throw Error("No authentication token found");let{updateSettings:n}=await Promise.resolve().then(r.bind(r,64075)),o={theme:s.appearance.theme,font:s.appearance.font,fontSize:s.appearance.fontSize,caretStyle:s.appearance.caretStyle,caretColor:s.appearance.caretColor,colorScheme:s.appearance.colorScheme,animations:s.appearance.animations,smoothCaret:s.appearance.smoothCaret,showWpmCounter:s.appearance.showWpmCounter,showAccuracyCounter:s.appearance.showAccuracyCounter,soundEffects:s.behavior.soundEffects,keyFeedback:s.behavior.keyFeedback,defaultMode:s.behavior.defaultMode,defaultDifficulty:s.behavior.defaultDifficulty,defaultDuration:s.behavior.defaultDuration,defaultWordCount:s.behavior.defaultWordCount,paceCaretWpm:s.behavior.paceCaretWpm,paceCaretEnabled:s.behavior.paceCaretEnabled,autoSave:s.behavior.autoSave,focusMode:s.behavior.focusMode,quickRestart:s.behavior.quickRestart,blindMode:s.behavior.blindMode};await n(o,a)}catch(e){throw console.error("Failed to save settings to server:",e),e}finally{e({isLoading:!1})}},loadFromServer:async()=>{try{e({isLoading:!0});let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found");let{getSettings:s}=await Promise.resolve().then(r.bind(r,64075)),a=await s(t);e(e=>({settings:{appearance:{...e.settings.appearance,theme:a.theme||e.settings.appearance.theme,font:a.font||e.settings.appearance.font,fontSize:a.fontSize||e.settings.appearance.fontSize,caretStyle:a.caretStyle||e.settings.appearance.caretStyle,caretColor:a.caretColor||e.settings.appearance.caretColor,colorScheme:a.colorScheme||e.settings.appearance.colorScheme,animations:a.animations??e.settings.appearance.animations,smoothCaret:a.smoothCaret??e.settings.appearance.smoothCaret,showWpmCounter:a.showWpmCounter??e.settings.appearance.showWpmCounter,showAccuracyCounter:a.showAccuracyCounter??e.settings.appearance.showAccuracyCounter},behavior:{...e.settings.behavior,soundEffects:a.soundEffects??e.settings.behavior.soundEffects,keyFeedback:a.keyFeedback??e.settings.behavior.keyFeedback,defaultMode:a.defaultMode||e.settings.behavior.defaultMode,defaultDifficulty:a.defaultDifficulty||e.settings.behavior.defaultDifficulty,defaultDuration:a.defaultDuration||e.settings.behavior.defaultDuration,defaultWordCount:a.defaultWordCount||e.settings.behavior.defaultWordCount,paceCaretWpm:a.paceCaretWpm||e.settings.behavior.paceCaretWpm,paceCaretEnabled:a.paceCaretEnabled??e.settings.behavior.paceCaretEnabled,autoSave:a.autoSave??e.settings.behavior.autoSave,focusMode:a.focusMode??e.settings.behavior.focusMode,quickRestart:a.quickRestart??e.settings.behavior.quickRestart,blindMode:a.blindMode??e.settings.behavior.blindMode}}}))}catch(e){throw console.error("Failed to load settings from server:",e),e}finally{e({isLoading:!1})}}}),{name:"typeamp-settings",partialize:e=>({settings:e.settings})}))},79021:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>c,L3:()=>m,c7:()=>u,lG:()=>i,rr:()=>h});var s=r(13486);r(60159);var a=r(58467),n=r(1039),o=r(26518);function i({...e}){return(0,s.jsx)(a.bL,{"data-slot":"dialog",...e})}function l({...e}){return(0,s.jsx)(a.ZL,{"data-slot":"dialog-portal",...e})}function d({className:e,...t}){return(0,s.jsx)(a.hJ,{"data-slot":"dialog-overlay",className:(0,o.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function c({className:e,children:t,showCloseButton:r=!0,...i}){return(0,s.jsxs)(l,{"data-slot":"dialog-portal",children:[(0,s.jsx)(d,{}),(0,s.jsxs)(a.UC,{"data-slot":"dialog-content",className:(0,o.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...i,children:[t,r&&(0,s.jsxs)(a.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,o.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function m({className:e,...t}){return(0,s.jsx)(a.hE,{"data-slot":"dialog-title",className:(0,o.cn)("text-lg leading-none font-semibold",e),...t})}function h({className:e,...t}){return(0,s.jsx)(a.VY,{"data-slot":"dialog-description",className:(0,o.cn)("text-muted-foreground text-sm",e),...t})}},82635:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v,metadata:()=>x});var s=r(38828),a=r(48077),n=r.n(a),o=r(50323),i=r.n(o),l=r(67756),d=r(42671),c=r.n(d);function u(){return(0,s.jsx)("footer",{className:"bg-background border-t py-6",children:(0,s.jsx)("div",{className:"container mx-auto px-6",children:(0,s.jsxs)("div",{className:"text-muted-foreground flex justify-center space-x-6 text-sm",children:[(0,s.jsx)(c(),{href:"/about",className:"hover:text-foreground transition-colors",children:"About"}),(0,s.jsx)(c(),{href:"/privacy",className:"hover:text-foreground transition-colors",children:"Privacy"}),(0,s.jsx)(c(),{href:"https://github.com/Juhnk/type",target:"_blank",rel:"noopener noreferrer",className:"hover:text-foreground transition-colors",children:"GitHub"})]})})})}var m=r(19552),h=r(36422),p=r(77280),g=r(63049),f=r(52434);r(14276),r(34223);let x={title:"TypeAmp - Typing Practice Game",description:"Frictionless skill amplification through typing practice"};function v({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${n().variable} ${i().variable} font-sans antialiased`,children:(0,s.jsx)(p.AuthProvider,{children:(0,s.jsxs)(g.SettingsProvider,{children:[(0,s.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,s.jsx)(l.Header,{}),(0,s.jsx)("main",{className:"container mx-auto flex-1 px-6 py-8",children:e}),(0,s.jsx)(u,{})]}),(0,s.jsx)(m.EnhancedCommandPalette,{}),(0,s.jsx)(h.AuthModal,{}),(0,s.jsx)(f.Toaster,{})]})})})})}},96719:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,42671,23)),Promise.resolve().then(r.bind(r,52434)),Promise.resolve().then(r.bind(r,36422)),Promise.resolve().then(r.bind(r,19552)),Promise.resolve().then(r.bind(r,67756)),Promise.resolve().then(r.bind(r,77280)),Promise.resolve().then(r.bind(r,63049))}};